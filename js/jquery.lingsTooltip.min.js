/* Copyright Elliot Lings 2012 - elliotlings.com/jquery/tooltip
 * This work is licensed under the Creative Commons Attribution-NonCommercial 3.0 Unported License - http://creativecommons.org/licenses/by-nc/3.0/ */
;(function(b,u,s){var t=b(s);b.fn.extend({tooltip:function(c,a){(c=c||{})&&"object"==typeof c&&(c=b.extend({},b.tooltip.defaults,c));this.each(function(){new b.tooltip(this,c,a)})}});b.tooltip=function(c,a,m){var q,k={open:function(){"function"==typeof a.onOpen&&a.onOpen.call(this,c,a);a.unique&&this.closeAllTooltips();this.bindCloseEvent();a.autoPosition&&this.position();a.ajax&&!a.preload&&this.ajaxRequest();a.tooltip.stop(!0).fadeTo(a.fade,1,function(){"function"==typeof a.onOpened&&a.onOpened.call(this,
c,a)})},close:function(){"function"==typeof a.onClose&&a.onClose.call(this,c,a);this.bindOpenEvent();a.tooltip.stop(!0).fadeTo(a.fade,0,function(){"function"==typeof a.onClosed&&a.onClosed.call(this,c,a)})},closeAllTooltips:function(){b(b.tooltip.tips).each(function(){b(this).data("tooltip").stayOpen||b(this).tooltip("close")})},position:function(l,d,m){a.gravity=d||a.gravity;l=l||!1;var e=b(c);d=e.offset().left;var g=e.offset().top,j=e.outerWidth(),e=e.outerHeight(),k=j/2,f=a.tooltip,p=f.outerWidth(),
h=f.outerHeight(),n=p/2;if(a.autoGravity){var q=t.width(),r=t.height();g+e+h+a.offsetY<r&&n-k<=d?a.gravity="n":p+a.offsetX<d&&h/2+g+e/2<r?a.gravity="e":h+a.offsetY<g&&n-k<=d?a.gravity="s":p+a.offsetX+j+d<q&&h/2+g+e/2<r&&(a.gravity="w")}if(!f.hasClass(a.gravity)||!m){f.removeClass("n e w s");f.addClass(a.gravity);if(l)switch(a.gravity){default:f.stop().animate({top:g+e+a.offsetY,left:d+j/2-n});break;case "s":f.stop().animate({top:g-h-a.offsetY,left:d+j/2-n});break;case "w":f.stop().animate({top:g+
e/2-h/2,left:d+j+a.offsetX});break;case "e":f.stop().animate({top:g+e/2-h/2,left:d-p-a.offsetX})}else switch(a.gravity){default:f.css({top:g+e+a.offsetY,left:d+j/2-n});break;case "s":f.css({top:g-h-a.offsetY,left:d+j/2-n});break;case "w":f.css({top:g+e/2-h/2,left:d+j+a.offsetX});break;case "e":f.css({top:g+e/2-h/2,left:d-p-a.offsetX})}"function"==typeof a.onPosition&&a.onPosition.call(this,c,a)}},bindCloseEvent:function(){b(c).off(".lingstip");if(a.closeTrigger)b(c).on(a.closeTrigger+".lingstip",
function(l){a.preventDefault&&l.preventDefault();b(c).tooltip("close")})},bindOpenEvent:function(){b(c).off(".lingstip");if(a.openTrigger)b(c).on(a.openTrigger+".lingstip",function(l){a.preventDefault&&l.preventDefault();b(c).tooltip("open")})},ajaxRequest:function(c){var d=this;c=c||a.ajax;b.ajax(c).done(function(b){a.content=b;d.updateContent(b)}).fail(function(b,c){a.content=c;d.updateContent(c)});a.preload=!0},updateOptions:function(c){b.extend(a,c)},updateContent:function(b){a.tooltip.find(".tooltip-contents").html(b);
this.position()},remove:function(){a.tooltip.remove();b(c).removeData(a.closeTrigger+".lingstip,"+a.openTrigger+".lingstip");b(c).off(a.closeTrigger);b.tooltip.tips.splice(a.tid,1);b.tooltip.iterator--;return!1}};if(a&&"string"==typeof a){if("undefined"==typeof b(c).data("tooltip")){console.log("Cannot apply this method to tooltip. Tooltip doesn't exist.");return}q=a;a=b(c).data("tooltip");k[q](m);return this}if(a&&"object"==typeof a){"function"==typeof a.onCreate&&a.onCreate.call(this,c,a);a.tid=
b.tooltip.iterator;b.tooltip.tips[b.tooltip.iterator]=c;a.ajax&&a.preload&&k.ajaxRequest();m=b(a.template.replace("{{content}}",a.content)).addClass(".tooltip-"+a.tid,a.classes).attr("id",a.id);a.closeButton&&m.prepend(b(a.closeButtonContents).click(function(a){a.preventDefault();k.close()}));a.tooltip=m.hide();a.fade=a.fade||0;k.bindOpenEvent();if(a.autoPosition)b(u).on("resize",function(){b(b.tooltip.tips).each(function(){var a=this;if("undefined"==typeof c)var c=setTimeout(function(){b(a).tooltip("position",
!1,"",!0)},2E3)})});a.wrap?b(c).wrap("<div />").append(a.tooltip):b("body").append(a.tooltip);k.position();b.tooltip.iterator++}b(c).data("tooltip",a)};b.tooltip.iterator=0;b.tooltip.tips=[];b.tooltip.reposition=function(c){c=c||!1;b(b.tooltip.tips).each(function(){b(this).tooltip("position",c)})};b.tooltip.defaults={content:"Empty",classes:null,id:null,wrap:!1,openTrigger:"click",closeTrigger:"click",preventDefault:!0,closeButton:!1,fade:500,gravity:"n",autoGravity:!0,autoPosition:!0,unique:!0,stayOpen:!1,
offsetY:10,offsetX:15,ajax:null,preload:!1,template:'<div class="tooltip-container"><div class="tooltip-contents">{{content}}</div><div class="arrow"></div></div>',closeButtonContents:'<a href="#" class="tooltip-close">Close</a>',onCreate:function(){},onOpen:function(){},onOpened:function(){},onClose:function(){},onClosed:function(){},onPosition:function(){}};b.tooltip.autoTipDefaults={autoTip:!0,autoTipSelector:".tip"};b.tooltip.setDefaults=function(c){b.extend(b.tooltip.defaults,c)};b.tooltip.autoTip=
function(){var c=function(a){b(a).tooltip({unique:!1,openTrigger:"mouseover",closeTrigger:"mouseout",stayOpen:!0,closeButton:!1,onCreate:function(a,c){c.content=b(a).attr("title");b(a).attr("title",null)}})};b(b.tooltip.autoTipDefaults.autoTipSelector).each(function(){c(this)});b(b.tooltip.autoTipDefaults.autoTipSelector).live("DOMNodeInserted",function(){b.tooltip.autoTipDefaults.autoTip&&c(this)})};b(s).ready(b.tooltip.autoTip)})(jQuery,window,document);